---
pagetitle: "Minimum wage own-wage elasticity database"
page-layout: custom
section-divs: false
css: index.css
editor: source

---

::: {.hero-banner}

::: {.content-block}

# Minimum wage own-wage elasticity database

### A collection of estimates from minimum wage research studies

::: {.hero-buttons}
[Explore](explore/subgroup_figure.html){.btn-action-primary .btn-action .btn .btn-success .btn-lg role="button"}
[Download](download.html){#btn-guide .btn-action .btn .btn-info .btn-lg role="button"}
[Documentation](documentation.html){#btn-guide .btn-action .btn .btn-info .btn-lg role="button"}
::: 

:::
:::

::: {.content-block}
### Distribution of own-wage elasticities
```{r}
#| echo: false
#| warning: false
#| out-width: 90%
#| fig-cap: 
#|   - "{{< var citation.full >}}"
library(tidyverse)
library(hrbrthemes)
library(viridis)

data <- read_csv("mw_owe_database.csv", show_col_types = FALSE) %>% 
  mutate(bin = case_when(
    owe_b < -1 ~ -1.1,
    owe_b >= -1 & owe_b < -0.8 ~ -0.9,
    owe_b >= -0.8 & owe_b < -0.6 ~ -0.7,
    owe_b >= -0.6 & owe_b < -0.4 ~ -0.5,
    owe_b >= -0.4 & owe_b < -0.2 ~ -0.3,
    owe_b >= -0.2 & owe_b < 0.0 ~ -0.1,
    owe_b >= 0.0 & owe_b < 0.2 ~ 0.1,
    owe_b >= 0.2 ~ 0.3
  )) 
  
binned_data <- data %>% 
  mutate(group = case_when(
    owe_b < -0.8 ~ '"Large" negative',
    owe_b >= -0.8 & owe_b < -0.4 ~ '"Medium" negative',
    owe_b >= -0.4 & owe_b < 0.0 ~ '"Small" negative',
    owe_b >= 0.0 ~ 'Zero or positive',
  )) %>% 
  count(group, bin) %>%
  ungroup() %>% 
  mutate(bin = bin * -1) 

median_owe <- data %>% 
  summarize(median(owe_b) * -1) %>% 
  pull()

median_owe_label <- paste("Median OWE =", round(median_owe * -1, 2))

y_axis_breaks <- seq(-11, 3, 2) / 10 * -1
y_axis_labels <- c(
  "More negative than -1.0",
  "-1.0  to -0.8",
  "-0.8  to -0.6",
  "-0.6  to -0.4",
  "-0.4  to -0.2",
  "-0.2  to  0.0",
  " 0.0  to  0.2",
  "More positive than 0.2"
)
binned_data %>% 
  ggplot(aes(y = bin, x = n, fill = group)) +
  geom_col(orientation = "y") + 
  geom_segment(
    aes(x = 0, xend = 22, y = median_owe, yend = median_owe),
    lineend = "round", linetype = "dashed"
  ) +
  annotate(
    "text", 
    x = 22.5, 
    y = median_owe, 
    label = median_owe_label,
    #color = "grey40",
    hjust = 0,
    size = 3.1
  ) + 
  expand_limits(x = 30) +
  scale_y_continuous(breaks = y_axis_breaks, labels = y_axis_labels) +
  scale_x_continuous(breaks = seq(0, 20, 5), minor_breaks = seq(0, 15, 5) + 2.5) +
  scale_fill_viridis(discrete = TRUE) +
  labs(
    x = "Number of studies",
    y = NULL
  ) +
  theme_ipsum_rc() +
  theme(
    panel.grid.major.y = element_blank(),
    panel.grid.minor.y = element_blank(),
    legend.title=element_blank(),
    legend.position = c(0.85, 0.8),
    axis.title.x = element_text(hjust = 0.6),
    plot.margin = margin(0,0,0,0)
  )
```
:::
